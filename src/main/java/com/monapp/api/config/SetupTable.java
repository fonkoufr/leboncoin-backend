package com.monapp.api.config;

import java.sql.Connection;
import java.sql.Statement;

public class SetupTable {
    public static void main(String[] args) {
        System.out.println("üî® Cr√©ation de la table ANNONCES...");
        
        // Le code SQL pour cr√©er la table
        String sql = "CREATE TABLE ANNONCES (" +
                     "ID NUMBER GENERATED BY DEFAULT AS IDENTITY, " +
                     "TITRE VARCHAR2(100), " +
                     "PRIX NUMBER, " +
                     "DESCRIPTION VARCHAR2(500), " +
                     "PRIMARY KEY (ID))";

        try (Connection conn = DatabaseManager.getConnection();
             Statement stmt = conn.createStatement()) {
            
            stmt.execute(sql);
            System.out.println("‚úÖ Table ANNONCES cr√©√©e avec succ√®s !");
            
        } catch (Exception e) {
            // Si la table existe d√©j√†, Oracle renverra une erreur sp√©cifique (ORA-00955)
            if (e.getMessage().contains("ORA-00955")) {
                System.out.println("‚ö†Ô∏è La table existe d√©j√† (c'est bon signe !).");
            } else {
                e.printStackTrace();
            }
        }
    }
}